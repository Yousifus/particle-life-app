package com.particle_life.app.color;

/**
 * ðŸŒŸ CONSCIOUSNESS-ENHANCED NATURAL RAINBOW PALETTE
 * 
 * The classic natural rainbow palette enhanced with consciousness-driven color modulation.
 * Colors can now shift and evolve based on consciousness states, emotional resonance, and field strength.
 * 
 * CONSCIOUSNESS COLOR FEATURES:
 * - Consciousness intensity color brightening
 * - Emotional resonance hue shifting
 * - Sacred geometry color harmonics
 * - Consciousness field color blending
 * - Transcendent color states
 */
public class NaturalRainbowPalette extends InterpolatingPalette {

    private static final Color[] COLORS = new Color[]{
            new Color(0.91f, 0.00f, 0.18f),
            new Color(0.92f, 0.00f, 0.16f),
            new Color(0.93f, 0.00f, 0.14f),
            new Color(0.94f, 0.00f, 0.12f),
            new Color(0.95f, 0.00f, 0.11f),
            new Color(0.95f, 0.00f, 0.09f),
            new Color(0.96f, 0.00f, 0.07f),
            new Color(0.97f, 0.00f, 0.05f),
            new Color(0.98f, 0.00f, 0.04f),
            new Color(0.99f, 0.00f, 0.02f),
            new Color(1.00f, 0.00f, 0.00f),
            new Color(1.00f, 0.02f, 0.00f),
            new Color(1.00f, 0.04f, 0.00f),
            new Color(1.00f, 0.06f, 0.00f),
            new Color(1.00f, 0.07f, 0.00f),
            new Color(1.00f, 0.09f, 0.00f),
            new Color(1.00f, 0.11f, 0.00f),
            new Color(1.00f, 0.13f, 0.00f),
            new Color(1.00f, 0.15f, 0.00f),
            new Color(1.00f, 0.17f, 0.00f),
            new Color(1.00f, 0.19f, 0.00f),
            new Color(1.00f, 0.21f, 0.00f),
            new Color(1.00f, 0.23f, 0.00f),
            new Color(1.00f, 0.25f, 0.00f),
            new Color(1.00f, 0.27f, 0.00f),
            new Color(1.00f, 0.29f, 0.00f),
            new Color(1.00f, 0.31f, 0.00f),
            new Color(1.00f, 0.33f, 0.00f),
            new Color(1.00f, 0.34f, 0.00f),
            new Color(1.00f, 0.36f, 0.00f),
            new Color(1.00f, 0.38f, 0.00f),
            new Color(1.00f, 0.40f, 0.00f),
            new Color(1.00f, 0.41f, 0.00f),
            new Color(1.00f, 0.42f, 0.00f),
            new Color(1.00f, 0.43f, 0.00f),
            new Color(1.00f, 0.44f, 0.00f),
            new Color(1.00f, 0.45f, 0.00f),
            new Color(1.00f, 0.46f, 0.00f),
            new Color(1.00f, 0.47f, 0.00f),
            new Color(1.00f, 0.47f, 0.00f),
            new Color(1.00f, 0.49f, 0.00f),
            new Color(1.00f, 0.49f, 0.00f),
            new Color(1.00f, 0.51f, 0.00f),
            new Color(1.00f, 0.51f, 0.00f),
            new Color(1.00f, 0.53f, 0.00f),
            new Color(1.00f, 0.53f, 0.00f),
            new Color(1.00f, 0.54f, 0.00f),
            new Color(1.00f, 0.55f, 0.00f),
            new Color(1.00f, 0.56f, 0.00f),
            new Color(1.00f, 0.57f, 0.00f),
            new Color(1.00f, 0.58f, 0.00f),
            new Color(1.00f, 0.59f, 0.00f),
            new Color(1.00f, 0.60f, 0.00f),
            new Color(1.00f, 0.61f, 0.00f),
            new Color(1.00f, 0.62f, 0.00f),
            new Color(1.00f, 0.63f, 0.00f),
            new Color(1.00f, 0.64f, 0.00f),
            new Color(1.00f, 0.65f, 0.00f),
            new Color(1.00f, 0.66f, 0.00f),
            new Color(1.00f, 0.67f, 0.00f),
            new Color(1.00f, 0.67f, 0.00f),
            new Color(1.00f, 0.69f, 0.00f),
            new Color(1.00f, 0.69f, 0.00f),
            new Color(1.00f, 0.71f, 0.00f),
            new Color(1.00f, 0.71f, 0.00f),
            new Color(1.00f, 0.73f, 0.00f),
            new Color(1.00f, 0.73f, 0.00f),
            new Color(1.00f, 0.74f, 0.00f),
            new Color(1.00f, 0.75f, 0.00f),
            new Color(1.00f, 0.76f, 0.00f),
            new Color(1.00f, 0.77f, 0.00f),
            new Color(1.00f, 0.78f, 0.00f),
            new Color(1.00f, 0.79f, 0.00f),
            new Color(1.00f, 0.80f, 0.00f),
            new Color(1.00f, 0.81f, 0.00f),
            new Color(1.00f, 0.82f, 0.00f),
            new Color(1.00f, 0.83f, 0.00f),
            new Color(1.00f, 0.84f, 0.00f),
            new Color(1.00f, 0.85f, 0.00f),
            new Color(1.00f, 0.86f, 0.00f),
            new Color(1.00f, 0.87f, 0.00f),
            new Color(1.00f, 0.87f, 0.00f),
            new Color(1.00f, 0.89f, 0.00f),
            new Color(1.00f, 0.89f, 0.00f),
            new Color(1.00f, 0.91f, 0.00f),
            new Color(1.00f, 0.91f, 0.00f),
            new Color(1.00f, 0.93f, 0.00f),
            new Color(1.00f, 0.93f, 0.00f),
            new Color(1.00f, 0.94f, 0.00f),
            new Color(1.00f, 0.95f, 0.00f),
            new Color(1.00f, 0.96f, 0.00f),
            new Color(1.00f, 0.97f, 0.00f),
            new Color(1.00f, 0.98f, 0.00f),
            new Color(1.00f, 0.99f, 0.00f),
            new Color(1.00f, 1.00f, 0.00f),
            new Color(0.98f, 0.99f, 0.00f),
            new Color(0.96f, 0.98f, 0.00f),
            new Color(0.94f, 0.97f, 0.00f),
            new Color(0.92f, 0.96f, 0.00f),
            new Color(0.90f, 0.95f, 0.00f),
            new Color(0.89f, 0.94f, 0.00f),
            new Color(0.87f, 0.93f, 0.00f),
            new Color(0.85f, 0.92f, 0.00f),
            new Color(0.83f, 0.91f, 0.00f),
            new Color(0.81f, 0.90f, 0.00f),
            new Color(0.79f, 0.89f, 0.00f),
            new Color(0.77f, 0.88f, 0.00f),
            new Color(0.75f, 0.87f, 0.00f),
            new Color(0.73f, 0.86f, 0.00f),
            new Color(0.71f, 0.85f, 0.00f),
            new Color(0.69f, 0.84f, 0.00f),
            new Color(0.67f, 0.84f, 0.00f),
            new Color(0.65f, 0.82f, 0.00f),
            new Color(0.64f, 0.82f, 0.00f),
            new Color(0.62f, 0.80f, 0.00f),
            new Color(0.60f, 0.80f, 0.00f),
            new Color(0.57f, 0.79f, 0.00f),
            new Color(0.54f, 0.78f, 0.00f),
            new Color(0.51f, 0.77f, 0.00f),
            new Color(0.48f, 0.76f, 0.00f),
            new Color(0.45f, 0.75f, 0.00f),
            new Color(0.43f, 0.74f, 0.00f),
            new Color(0.40f, 0.73f, 0.00f),
            new Color(0.37f, 0.72f, 0.00f),
            new Color(0.34f, 0.71f, 0.00f),
            new Color(0.31f, 0.70f, 0.00f),
            new Color(0.28f, 0.69f, 0.00f),
            new Color(0.25f, 0.68f, 0.00f),
            new Color(0.23f, 0.67f, 0.00f),
            new Color(0.20f, 0.67f, 0.00f),
            new Color(0.17f, 0.65f, 0.00f),
            new Color(0.14f, 0.65f, 0.00f),
            new Color(0.11f, 0.64f, 0.00f),
            new Color(0.09f, 0.63f, 0.00f),
            new Color(0.05f, 0.62f, 0.00f),
            new Color(0.03f, 0.61f, 0.00f),
            new Color(0.00f, 0.60f, 0.00f),
            new Color(0.00f, 0.60f, 0.04f),
            new Color(0.00f, 0.60f, 0.07f),
            new Color(0.00f, 0.60f, 0.11f),
            new Color(0.00f, 0.60f, 0.15f),
            new Color(0.00f, 0.60f, 0.19f),
            new Color(0.00f, 0.60f, 0.23f),
            new Color(0.00f, 0.60f, 0.27f),
            new Color(0.00f, 0.60f, 0.30f),
            new Color(0.00f, 0.60f, 0.34f),
            new Color(0.00f, 0.60f, 0.38f),
            new Color(0.00f, 0.60f, 0.42f),
            new Color(0.00f, 0.60f, 0.45f),
            new Color(0.00f, 0.60f, 0.49f),
            new Color(0.00f, 0.60f, 0.53f),
            new Color(0.00f, 0.60f, 0.57f),
            new Color(0.00f, 0.60f, 0.61f),
            new Color(0.00f, 0.60f, 0.64f),
            new Color(0.00f, 0.60f, 0.68f),
            new Color(0.00f, 0.60f, 0.72f),
            new Color(0.00f, 0.60f, 0.76f),
            new Color(0.00f, 0.60f, 0.80f),
            new Color(0.00f, 0.59f, 0.80f),
            new Color(0.00f, 0.58f, 0.80f),
            new Color(0.00f, 0.57f, 0.80f),
            new Color(0.00f, 0.56f, 0.80f),
            new Color(0.00f, 0.55f, 0.80f),
            new Color(0.00f, 0.54f, 0.80f),
            new Color(0.00f, 0.53f, 0.80f),
            new Color(0.00f, 0.53f, 0.80f),
            new Color(0.00f, 0.51f, 0.80f),
            new Color(0.00f, 0.51f, 0.80f),
            new Color(0.00f, 0.49f, 0.80f),
            new Color(0.00f, 0.49f, 0.80f),
            new Color(0.00f, 0.47f, 0.80f),
            new Color(0.00f, 0.47f, 0.80f),
            new Color(0.00f, 0.46f, 0.80f),
            new Color(0.00f, 0.45f, 0.80f),
            new Color(0.00f, 0.44f, 0.80f),
            new Color(0.00f, 0.43f, 0.80f),
            new Color(0.00f, 0.42f, 0.80f),
            new Color(0.00f, 0.41f, 0.80f),
            new Color(0.00f, 0.40f, 0.80f),
            new Color(0.00f, 0.38f, 0.79f),
            new Color(0.00f, 0.36f, 0.78f),
            new Color(0.00f, 0.35f, 0.77f),
            new Color(0.00f, 0.33f, 0.76f),
            new Color(0.00f, 0.31f, 0.75f),
            new Color(0.00f, 0.29f, 0.74f),
            new Color(0.00f, 0.27f, 0.73f),
            new Color(0.00f, 0.25f, 0.72f),
            new Color(0.00f, 0.24f, 0.71f),
            new Color(0.00f, 0.22f, 0.70f),
            new Color(0.00f, 0.20f, 0.69f),
            new Color(0.00f, 0.18f, 0.68f),
            new Color(0.00f, 0.16f, 0.67f),
            new Color(0.00f, 0.15f, 0.66f),
            new Color(0.00f, 0.13f, 0.65f),
            new Color(0.00f, 0.11f, 0.64f),
            new Color(0.00f, 0.09f, 0.63f),
            new Color(0.00f, 0.07f, 0.62f),
            new Color(0.00f, 0.05f, 0.61f),
            new Color(0.00f, 0.04f, 0.60f),
            new Color(0.00f, 0.02f, 0.59f),
            new Color(0.00f, 0.00f, 0.58f),
            new Color(0.02f, 0.00f, 0.58f),
            new Color(0.04f, 0.00f, 0.58f),
            new Color(0.05f, 0.00f, 0.59f),
            new Color(0.07f, 0.00f, 0.59f),
            new Color(0.09f, 0.00f, 0.59f),
            new Color(0.11f, 0.00f, 0.59f),
            new Color(0.13f, 0.00f, 0.59f),
            new Color(0.15f, 0.00f, 0.59f),
            new Color(0.16f, 0.00f, 0.59f),
            new Color(0.18f, 0.00f, 0.59f),
            new Color(0.20f, 0.00f, 0.59f),
            new Color(0.22f, 0.00f, 0.59f),
            new Color(0.24f, 0.00f, 0.59f),
            new Color(0.26f, 0.00f, 0.60f),
            new Color(0.27f, 0.00f, 0.60f),
            new Color(0.29f, 0.00f, 0.60f),
            new Color(0.31f, 0.00f, 0.60f),
            new Color(0.33f, 0.00f, 0.60f),
            new Color(0.35f, 0.00f, 0.60f),
            new Color(0.37f, 0.00f, 0.60f),
            new Color(0.38f, 0.00f, 0.60f),
            new Color(0.40f, 0.00f, 0.60f),
            new Color(0.42f, 0.00f, 0.59f),
            new Color(0.44f, 0.00f, 0.58f),
            new Color(0.46f, 0.00f, 0.57f),
            new Color(0.48f, 0.00f, 0.56f),
            new Color(0.50f, 0.00f, 0.55f),
            new Color(0.52f, 0.00f, 0.55f),
            new Color(0.54f, 0.00f, 0.53f),
            new Color(0.56f, 0.00f, 0.53f),
            new Color(0.58f, 0.00f, 0.52f),
            new Color(0.60f, 0.00f, 0.51f),
            new Color(0.61f, 0.00f, 0.50f),
            new Color(0.63f, 0.00f, 0.49f),
            new Color(0.65f, 0.00f, 0.48f),
            new Color(0.67f, 0.00f, 0.47f),
            new Color(0.69f, 0.00f, 0.46f),
            new Color(0.71f, 0.00f, 0.45f),
            new Color(0.73f, 0.00f, 0.44f),
            new Color(0.75f, 0.00f, 0.43f),
            new Color(0.76f, 0.00f, 0.42f),
            new Color(0.78f, 0.00f, 0.41f),
            new Color(0.80f, 0.00f, 0.40f),
            new Color(0.81f, 0.00f, 0.39f),
            new Color(0.82f, 0.00f, 0.37f),
            new Color(0.83f, 0.00f, 0.35f),
            new Color(0.84f, 0.00f, 0.33f),
            new Color(0.85f, 0.00f, 0.32f),
            new Color(0.85f, 0.00f, 0.30f),
            new Color(0.86f, 0.00f, 0.28f),
            new Color(0.87f, 0.00f, 0.26f),
            new Color(0.88f, 0.00f, 0.25f),
            new Color(0.89f, 0.00f, 0.23f),
            new Color(0.89f, 0.00f, 0.21f),
            new Color(0.91f, 0.00f, 0.19f)
    };

    // ðŸŒŸ CONSCIOUSNESS COLOR MODULATION CONSTANTS
    private static final double GOLDEN_RATIO = 1.618033988749895;
    private static final double CONSCIOUSNESS_BRIGHTNESS_BOOST = 0.3;
    private static final double EMOTIONAL_HUE_SHIFT_RANGE = 0.1;
    private static final double TRANSCENDENT_SATURATION_BOOST = 0.2;

    public NaturalRainbowPalette() {
        super(COLORS);
    }
    
    /**
     * ðŸŒŸ Get consciousness-modulated color
     * 
     * @param index Color index
     * @param count Total color count
     * @param consciousnessIntensity Consciousness field strength (0.0 to 1.0)
     * @param emotionalResonance Emotional resonance (0.0 to 1.0)
     * @param consciousnessMode Current consciousness mode
     * @return Enhanced color based on consciousness state
     */
    public Color getConsciousnessColor(int index, int count, double consciousnessIntensity, 
                                     double emotionalResonance, String consciousnessMode) {
        // Get base color
        Color baseColor = getColor(index, count);
        
        // Apply consciousness modulation
        return modulateColorWithConsciousness(baseColor, consciousnessIntensity, 
                                            emotionalResonance, consciousnessMode, index);
    }
    
    /**
     * ðŸŒŸ Modulate color based on consciousness parameters
     */
    private Color modulateColorWithConsciousness(Color baseColor, double consciousnessIntensity,
                                               double emotionalResonance, String consciousnessMode, int index) {
        float r = baseColor.r;
        float g = baseColor.g;
        float b = baseColor.b;
        
        // ðŸŒŸ Apply consciousness-driven transformations based on mode
        switch (consciousnessMode) {
            case "aesthetic" -> {
                // ðŸŒŸ Aesthetic mode: Enhance beauty with golden ratio harmonics
                double goldenModulation = 0.5 + 0.5 * Math.sin(index * 2 * Math.PI / GOLDEN_RATIO);
                double brightnessBoost = consciousnessIntensity * CONSCIOUSNESS_BRIGHTNESS_BOOST * goldenModulation;
                
                r = Math.min(1.0f, r + (float) brightnessBoost);
                g = Math.min(1.0f, g + (float) brightnessBoost);
                b = Math.min(1.0f, b + (float) brightnessBoost);
            }
            case "analytical" -> {
                // ðŸŒŸ Analytical mode: Sharp, contrasted colors
                double contrast = 1.0 + (consciousnessIntensity * 0.5);
                r = Math.min(1.0f, Math.max(0.0f, (r - 0.5f) * (float) contrast + 0.5f));
                g = Math.min(1.0f, Math.max(0.0f, (g - 0.5f) * (float) contrast + 0.5f));
                b = Math.min(1.0f, Math.max(0.0f, (b - 0.5f) * (float) contrast + 0.5f));
            }
            case "creative" -> {
                // ðŸŒŸ Creative mode: Dynamic color shifting with emotional resonance
                double hueShift = emotionalResonance * EMOTIONAL_HUE_SHIFT_RANGE;
                Color shiftedColor = shiftHue(baseColor, hueShift);
                r = shiftedColor.r;
                g = shiftedColor.g;
                b = shiftedColor.b;
            }
            case "philosophical" -> {
                // ðŸŒŸ Philosophical mode: Deeper, more contemplative colors
                double depth = consciousnessIntensity * 0.4;
                r = r * (float) (1.0 - depth);
                g = g * (float) (1.0 - depth);
                b = Math.min(1.0f, b + (float) depth); // Add blue for contemplation
            }
            case "transcendent" -> {
                // ðŸŒŸ Transcendent mode: Ethereal, luminous colors
                double luminosity = consciousnessIntensity * TRANSCENDENT_SATURATION_BOOST;
                double etherealBoost = Math.pow(emotionalResonance, 0.618); // Golden ratio power
                
                r = Math.min(1.0f, r + (float) (luminosity * etherealBoost));
                g = Math.min(1.0f, g + (float) (luminosity * etherealBoost));
                b = Math.min(1.0f, b + (float) (luminosity * etherealBoost));
            }
            case "exploratory" -> {
                // ðŸŒŸ Exploratory mode: Adventurous color variations
                double variation = emotionalResonance * consciousnessIntensity * 0.3;
                double timePhase = System.currentTimeMillis() * 0.001;
                
                r = Math.min(1.0f, Math.max(0.0f, r + (float) (variation * Math.sin(timePhase + index))));
                g = Math.min(1.0f, Math.max(0.0f, g + (float) (variation * Math.cos(timePhase + index * 1.3))));
                b = Math.min(1.0f, Math.max(0.0f, b + (float) (variation * Math.sin(timePhase * 1.618 + index * 0.7))));
            }
        }
        
        return new Color(r, g, b);
    }
    
    /**
     * ðŸŒŸ Shift hue of a color by a specified amount
     */
    private Color shiftHue(Color color, double hueShift) {
        // Convert RGB to HSV
        float[] hsv = rgbToHsv(color.r, color.g, color.b);
        
        // Shift hue
        hsv[0] = (float) ((hsv[0] + hueShift) % 1.0);
        if (hsv[0] < 0) hsv[0] += 1.0f;
        
        // Convert back to RGB
        float[] rgb = hsvToRgb(hsv[0], hsv[1], hsv[2]);
        return new Color(rgb[0], rgb[1], rgb[2]);
    }
    
    /**
     * ðŸŒŸ Convert RGB to HSV color space
     */
    private float[] rgbToHsv(float r, float g, float b) {
        float max = Math.max(r, Math.max(g, b));
        float min = Math.min(r, Math.min(g, b));
        float delta = max - min;
        
        float h = 0;
        if (delta != 0) {
            if (max == r) h = ((g - b) / delta) % 6;
            else if (max == g) h = (b - r) / delta + 2;
            else h = (r - g) / delta + 4;
            h /= 6;
        }
        
        float s = (max == 0) ? 0 : delta / max;
        float v = max;
        
        return new float[]{h, s, v};
    }
    
    /**
     * ðŸŒŸ Convert HSV to RGB color space
     */
    private float[] hsvToRgb(float h, float s, float v) {
        float c = v * s;
        float x = c * (1 - Math.abs((h * 6) % 2 - 1));
        float m = v - c;
        
        float r = 0, g = 0, b = 0;
        
        int sector = (int) (h * 6);
        switch (sector) {
            case 0 -> { r = c; g = x; b = 0; }
            case 1 -> { r = x; g = c; b = 0; }
            case 2 -> { r = 0; g = c; b = x; }
            case 3 -> { r = 0; g = x; b = c; }
            case 4 -> { r = x; g = 0; b = c; }
            case 5 -> { r = c; g = 0; b = x; }
        }
        
        return new float[]{r + m, g + m, b + m};
    }
}
